{"version":3,"sources":["webpack:///src/views/auth/wx_author.vue","webpack:///./src/views/auth/wx_author.vue?fc82","webpack:///./src/views/auth/wx_author.vue"],"names":["wx_author","data","openid","methods","getUrlParame","parameName","parames","window","location","search","indexOf","parameValue","substring","length","replace","mounted","created","_this","this","func","setOpenid","code","axios","ajaxGet","res","status","console","log","href","split","getToUrl","Object","es","message","redirect_url","encodeURI","url","exec","auth_wx_author","render","_h","$createElement","_self","_c","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"6IAQAA,GACAC,KADA,WAEA,OACAC,OAAA,KAGAC,SACAC,aADA,SACAC,GAIA,IAAAC,EAAAC,OAAAC,SAAAC,OAEA,GAAAH,EAAAI,QAAAL,IAAA,GACA,IAAAM,EAAA,GAGA,OAFAA,EAAAL,EAAAM,UAAAN,EAAAI,QAAAL,GAAAC,EAAAO,SAEAH,QAAA,QAIAC,GAFAA,IAAAC,UAAA,EAAAD,EAAAD,QAAA,OAEAI,QAAAT,EAAA,QAGA,MAIAU,QA5BA,aA8BAC,QA9BA,WA8BA,IAAAC,EAAAC,KACQC,EAAA,EAARC,UAAA,IACA,IAAAC,EAAAH,KAAAd,aAAA,QACA,GAAAiB,EAaYC,EAAA,EAAZC,QAAA,gBAAAF,QAAA,SAAAG,GACA,YAAAA,EAAAC,QAEAR,EAAAf,OAAAsB,EAAAvB,KAAAC,OACoBiB,EAAA,EAApBC,UAAAH,EAAAf,QACAwB,QAAAC,IAAApB,OAAAC,SAAAoB,KAAAC,MAAA,QAAAV,EAAA,EAAAW,YACAvB,OAAAC,SAAAM,QAAAP,OAAAC,SAAAoB,KAAAC,MAAA,QAAAV,EAAA,EAAAW,aAEoBC,OAAAC,EAAA,EAAAD,CAApBP,EAAAS,eArBA,CACA,IAAAC,EAAAC,UAAA5B,OAAAC,SAAAoB,KAAAC,MAAA,SACYP,EAAA,EAAZC,QAAA,oBAAAW,gBAAA,SAAAV,GACA,eAAAA,EAAAC,OAAA,CAEA,IAAAW,EAAA,YAAAC,KAAAb,EAAAvB,KAAAmC,KACAA,IAAA,GAAAtB,QAAA,gBACAP,OAAAC,SAAAoB,KAAAQ,OAEoBL,OAAAC,EAAA,EAAAD,CAApBP,EAAAS,cC/CeK,GADEC,OAFjB,WAA0B,IAAaC,EAAbtB,KAAauB,eAAkD,OAA/DvB,KAAuCwB,MAAAC,IAAAH,GAAwB,QAExEI,oBCYjBC,EAdyBC,EAAQ,OAcjCC,CACE/C,EACAsC,GATF,EAEA,KAEA,KAEA,MAUeU,EAAA,QAAAH,EAAiB","file":"static/js/5.10d8dc78a7567c14d985.js","sourcesContent":["<template>\r\n    <div></div>\r\n</template>\r\n<script>\r\nimport http from '@/utils/axios'\r\nimport func from '@/utils/func'\r\nimport { Toast } from 'vant'\r\n\r\nexport default {\r\n    data () {\r\n        return {\r\n            openid: ''\r\n        }\r\n    },\r\n    methods: {\r\n        getUrlParame (parameName) {\r\n            /// 获取地址栏指定参数的值\r\n            /// <param name=\"parameName\">参数名</param>\r\n            // 获取url中跟在问号后面的部分\r\n            var parames = window.location.search\r\n            // 检测参数是否存在\r\n            if (parames.indexOf(parameName) > -1) {\r\n                var parameValue = ''\r\n                parameValue = parames.substring(parames.indexOf(parameName), parames.length)\r\n                // 检测后面是否还有参数\r\n                if (parameValue.indexOf('&') > -1) {\r\n                    // 去除后面多余的参数, 得到最终 parameName=parameValue 形式的值\r\n                    parameValue = parameValue.substring(0, parameValue.indexOf('&'))\r\n                    // 去掉参数名, 得到最终纯值字符串\r\n                    parameValue = parameValue.replace(parameName + '=', '')\r\n                    return parameValue\r\n                }\r\n                return ''\r\n            }\r\n        }\r\n    },\r\n    mounted () {\r\n    },\r\n    created () {\r\n        func.setOpenid('')\r\n        var code = this.getUrlParame('code')\r\n        if (!code) {\r\n            var redirect_url = encodeURI(window.location.href.split('#')[0]) // 微信会自动识别#    并且清除#后面的内容\r\n            http.ajaxGet('wechat_oauth_url', {redirect_url}, res => {\r\n                if (res.status === 'success') {\r\n                    // 正则处理后台返回的链接\r\n                    var url = /http\\S*t/g.exec(res.data.url)\r\n                    url = url[0].replace(/\\\\u0026/g, '&')\r\n                    window.location.href = url\r\n                } else {\r\n                    Toast(res.message)\r\n                }\r\n            })\r\n        } else {\r\n            http.ajaxGet('wechat_oauth', {code}, res => {\r\n                if (res.status === 'success') {\r\n                    // 返回状态和UId\r\n                    this.openid = res.data.openid\r\n                    func.setOpenid(this.openid)\r\n                    console.log(window.location.href.split('#')[0] + func.getToUrl())\r\n                    window.location.replace(window.location.href.split('#')[0] + func.getToUrl())\r\n                } else {\r\n                    Toast(res.message)\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/auth/wx_author.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div')}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-3bec1f48\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/auth/wx_author.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./wx_author.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./wx_author.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3bec1f48\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./wx_author.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/auth/wx_author.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}